(function() {
    var method;
    var noop = function() {};
    var methods = [ "assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeStamp", "trace", "warn" ];
    var length = methods.length;
    var console = window.console = window.console || {};
    while (length--) {
        method = methods[length];
        if (!console[method]) {
            console[method] = noop;
        }
    }
})();

!function(a, b, c, d) {
    var e = a(b);
    a.fn.lazyload = function(f) {
        function g() {
            var b = 0;
            i.each(function() {
                var c = a(this);
                if (!j.skip_invisible || c.is(":visible")) if (a.abovethetop(this, j) || a.leftofbegin(this, j)) ; else if (a.belowthefold(this, j) || a.rightoffold(this, j)) {
                    if (++b > j.failure_limit) return !1;
                } else c.trigger("appear"), b = 0;
            });
        }
        var h, i = this, j = {
            threshold: 0,
            failure_limit: 0,
            event: "scroll",
            effect: "show",
            container: b,
            data_attribute: "original",
            skip_invisible: !0,
            appear: null,
            load: null,
            placeholder: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"
        };
        return f && (d !== f.failurelimit && (f.failure_limit = f.failurelimit, delete f.failurelimit), 
        d !== f.effectspeed && (f.effect_speed = f.effectspeed, delete f.effectspeed), a.extend(j, f)), 
        h = j.container === d || j.container === b ? e : a(j.container), 0 === j.event.indexOf("scroll") && h.bind(j.event, function() {
            return g();
        }), this.each(function() {
            var b = this, c = a(b);
            b.loaded = !1, (c.attr("src") === d || c.attr("src") === !1) && c.is("img") && c.attr("src", j.placeholder), 
            c.one("appear", function() {
                if (!this.loaded) {
                    if (j.appear) {
                        var d = i.length;
                        j.appear.call(b, d, j);
                    }
                    a("<img />").bind("load", function() {
                        var d = c.attr("data-" + j.data_attribute);
                        c.hide(), c.is("img") ? c.attr("src", d) : c.css("background-image", "url('" + d + "')"), 
                        c[j.effect](j.effect_speed), b.loaded = !0;
                        var e = a.grep(i, function(a) {
                            return !a.loaded;
                        });
                        if (i = a(e), j.load) {
                            var f = i.length;
                            j.load.call(b, f, j);
                        }
                    }).attr("src", c.attr("data-" + j.data_attribute));
                }
            }), 0 !== j.event.indexOf("scroll") && c.bind(j.event, function() {
                b.loaded || c.trigger("appear");
            });
        }), e.bind("resize", function() {
            g();
        }), /(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion) && e.bind("pageshow", function(b) {
            b.originalEvent && b.originalEvent.persisted && i.each(function() {
                a(this).trigger("appear");
            });
        }), a(c).ready(function() {
            g();
        }), this;
    }, a.belowthefold = function(c, f) {
        var g;
        return g = f.container === d || f.container === b ? (b.innerHeight ? b.innerHeight : e.height()) + e.scrollTop() : a(f.container).offset().top + a(f.container).height(), 
        g <= a(c).offset().top - f.threshold;
    }, a.rightoffold = function(c, f) {
        var g;
        return g = f.container === d || f.container === b ? e.width() + e.scrollLeft() : a(f.container).offset().left + a(f.container).width(), 
        g <= a(c).offset().left - f.threshold;
    }, a.abovethetop = function(c, f) {
        var g;
        return g = f.container === d || f.container === b ? e.scrollTop() : a(f.container).offset().top, 
        g >= a(c).offset().top + f.threshold + a(c).height();
    }, a.leftofbegin = function(c, f) {
        var g;
        return g = f.container === d || f.container === b ? e.scrollLeft() : a(f.container).offset().left, 
        g >= a(c).offset().left + f.threshold + a(c).width();
    }, a.inviewport = function(b, c) {
        return !(a.rightoffold(b, c) || a.leftofbegin(b, c) || a.belowthefold(b, c) || a.abovethetop(b, c));
    }, a.extend(a.expr[":"], {
        "below-the-fold": function(b) {
            return a.belowthefold(b, {
                threshold: 0
            });
        },
        "above-the-top": function(b) {
            return !a.belowthefold(b, {
                threshold: 0
            });
        },
        "right-of-screen": function(b) {
            return a.rightoffold(b, {
                threshold: 0
            });
        },
        "left-of-screen": function(b) {
            return !a.rightoffold(b, {
                threshold: 0
            });
        },
        "in-viewport": function(b) {
            return a.inviewport(b, {
                threshold: 0
            });
        },
        "above-the-fold": function(b) {
            return !a.belowthefold(b, {
                threshold: 0
            });
        },
        "right-of-fold": function(b) {
            return a.rightoffold(b, {
                threshold: 0
            });
        },
        "left-of-fold": function(b) {
            return !a.rightoffold(b, {
                threshold: 0
            });
        }
    });
}(jQuery, window, document);

(function($) {
    "use strict";
    $.fn.fitVids = function(options) {
        var settings = {
            customSelector: null,
            ignore: null,
            maxWidth: false,
            maxWidthDefault: 900
        };
        if (!document.getElementById("fit-vids-style")) {
            var head = document.head || document.getElementsByTagName("head")[0];
            var css = ".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}";
            var div = document.createElement("div");
            div.innerHTML = '<p>x</p><style id="fit-vids-style">' + css + "</style>";
            head.appendChild(div.childNodes[1]);
        }
        if (options) {
            $.extend(settings, options);
        }
        return this.each(function() {
            var selectors = [ 'iframe[src*="player.vimeo.com"]', 'iframe[src*="youtube.com"]', 'iframe[src*="youtube-nocookie.com"]', 'iframe[src*="kickstarter.com"][src*="video.html"]', "iframe[src*='embed.spotify.com']", "object", "embed" ];
            if (settings.customSelector) {
                selectors.push(settings.customSelector);
            }
            var ignoreList = ".fitvidsignore";
            if (settings.ignore) {
                ignoreList = ignoreList + ", " + settings.ignore;
            }
            var $allVideos = $(this).find(selectors.join(","));
            $allVideos = $allVideos.not("object object");
            $allVideos = $allVideos.not(ignoreList);
            $allVideos.each(function() {
                var $this = $(this);
                if ($this.parents(ignoreList).length > 0) {
                    return;
                }
                if (this.tagName.toLowerCase() === "embed" && $this.parent("object").length || $this.parent(".fluid-width-video-wrapper").length) {
                    return;
                }
                if (!$this.css("height") && !$this.css("width") && (isNaN($this.attr("height")) || isNaN($this.attr("width")))) {
                    $this.attr("height", 9);
                    $this.attr("width", 16);
                }
                var height = this.tagName.toLowerCase() === "object" || $this.attr("height") && !isNaN(parseInt($this.attr("height"), 10)) ? parseInt($this.attr("height"), 10) : $this.height(), width = !isNaN(parseInt($this.attr("width"), 10)) ? parseInt($this.attr("width"), 10) : $this.width(), aspectRatio = height / width;
                if (!$this.attr("id")) {
                    var videoID = "fitvid" + Math.floor(Math.random() * 999999);
                    $this.attr("id", videoID);
                }
                $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top", aspectRatio * 100 + "%");
                if (settings.maxWidth && (width || settings.maxWidthDefault)) {
                    $this.parent(".fluid-width-video-wrapper").wrap('<div class="max-width-video-wrapper"></div>').parent(".max-width-video-wrapper").css("max-width", width ? width + "px" : settings.maxWidthDefault + "px");
                }
                $this.removeAttr("height").removeAttr("width");
            });
        });
    };
})(window.jQuery || window.Zepto);

(function($) {
    document.documentElement.className += " js";
    if (Function("/*@cc_on return document.documentMode===10@*/")()) {
        document.documentElement.className += " ie10";
    }
    if ($("img.lazy").length) {
        $("img.lazy").show().lazyload({
            threshold: 100,
            failure_limit: 9999
        });
    }
    var getWidth = function() {
        var width;
        if (document.body && document.body.offsetWidth) {
            width = document.body.offsetWidth;
        }
        if (document.compatMode === "CSS1Compat" && document.documentElement && document.documentElement.offsetWidth) {
            width = document.documentElement.offsetWidth;
        }
        if (window.innerWidth) {
            width = window.innerWidth;
        }
        return width;
    };
    window.onload = function() {
        getWidth();
    };
    window.onresize = function() {
        getWidth();
    };
    var toggleClasses = function(element) {
        var $this = element, $togglePrefix = $this.data("prefix") || "this";
        if ($this.data("toggled") == "this") {
            var $toggled = $this.parents(".js-this");
        } else {
            var $toggled = $("." + $this.data("toggled"));
        }
        $this.toggleClass($togglePrefix + "-is-active");
        $toggled.toggleClass($togglePrefix + "-is-active");
        if ($this.data("remove")) {
            $("." + $this.data("remove")).removeClass($this.data("remove"));
        }
    };
    $(".js-toggle").on("click", function(e) {
        e.stopPropagation();
        toggleClasses($(this));
    });
    $(".js-toggle-parent").on("click", function(e) {
        e.preventDefault();
        var $this = $(this);
        $this.toggleClass("is-active");
        $this.parent().toggleClass("is-active");
    });
    $(".js-hover").on("mouseenter mouseleave", function(e) {
        e.preventDefault();
        toggleClasses($(this));
    });
    if ($(".js-carousel__single-item").length) {
        $(".js-carousel__single-item").slick({
            speed: 300,
            mobileFirst: true,
            autoplay: true,
            autoplaySpeed: 4e3,
            cssEase: "ease-out",
            fade: true,
            adaptiveHeight: true,
            nextArrow: ".arrow__next",
            prevArrow: ".arrow__prev",
            touchThreshold: 11,
            dots: true
        });
    }
    var orgTop = 80;
    $(window).scroll(function() {
        if (getWidth() < 700) {
            var currentTop = $(this).scrollTop(), $navBar = $(".header");
            if (currentTop > orgTop && !$(".header.nav-is-active").length) {
                $navBar.addClass("hide-nav");
            } else {
                $navBar.removeClass("hide-nav");
            }
            if (currentTop < 80) {
                $navBar.removeClass("hide-nav");
            } else {
                orgTop = currentTop;
            }
        }
    });
    $(".article__body, .text, .fitvid").fitVids();
    $(".theme-swatches--primary .swatch").click(function() {
        var thisColor = $(this).data("color");
        $(".theme-swatches--primary .swatch").removeClass("active");
        $(this).addClass("active");
        $("html").removeClass(function(index, css) {
            return (css.match(/(^|\s)theme--\S+/g) || []).join(" ");
        }).addClass("theme--" + thisColor);
    });
    $(".theme-swatches--secondary .swatch").click(function() {
        var thisColor = $(this).data("color");
        $(".theme-swatches--secondary .swatch").removeClass("active");
        $(this).addClass("active");
        $("body").removeClass(function(index, css) {
            return (css.match(/(^|\s)theme--\S+/g) || []).join(" ");
        }).addClass("theme--" + thisColor);
    });
})(jQuery);